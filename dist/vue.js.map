{"version":3,"file":"vue.js","sources":["../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["class Observer{\r\n    constructor(data){\r\n        this.walk(data)\r\n    }\r\n    walk(data){\r\n        Object.keys(data).forEach(key=>defineReactive(data,key,data[key]))\r\n    }\r\n}\r\n\r\nfunction defineReactive(target,key,value){\r\n    observe(value)\r\n    Object.defineProperty(target,key,{\r\n        get(){\r\n            return value\r\n        },\r\n        set(newValue){\r\n            if(value == newValue) return\r\n            value = newValue\r\n        }\r\n    })\r\n}\r\n\r\nexport function observe(data){\r\n    if(typeof data!=='object' || data == null){\r\n        return //只对对象进行劫持\r\n    }\r\n    // 如果一个对象被劫持过了，就不需要再劫持\r\n\r\n    return new Observer(data)\r\n}","import { observe } from \"./observe/index\";\r\n\r\nexport function initState(vm){\r\n    const opts = vm.$options\r\n    if(opts.data){\r\n        initData(vm)\r\n    }\r\n}\r\n\r\nfunction initData(vm){\r\n    let data = vm.$options.data\r\n    data = typeof data === 'function'?data.call(vm):data\r\n    console.log(data);\r\n\r\n    vm._data = data\r\n\r\n    observe(data)\r\n\r\n    // 将vm._data用vm进行代理\r\n    for(let key in data){\r\n        proxy(vm,'_data',key)\r\n    }\r\n}\r\n\r\nfunction proxy(vm,target,key){\r\n    Object.defineProperty(vm,key,{\r\n        get(){\r\n            return vm[target][key]\r\n        },\r\n        set(newValue){\r\n            vm[target][key] = newValue\r\n        }\r\n    })\r\n}","import { initState } from \"./state\"\r\n\r\n\r\nexport function initMixin(Vue){\r\n    Vue.prototype._init = function(options){\r\n        const vm = this\r\n        vm.$options = options\r\n\r\n        initState(vm)\r\n    }\r\n}","import {initMixin} from \"./init\"\r\n\r\n// \r\nfunction Vue(options){\r\n    this._init(options)\r\n}\r\n\r\ninitMixin(Vue) //扩展init方法\r\n\r\nexport default Vue"],"names":["Observer","data","walk","Object","keys","forEach","key","defineReactive","target","value","observe","defineProperty","get","set","newValue","initState","vm","opts","$options","initData","call","console","log","_data","proxy","initMixin","Vue","prototype","_init","options"],"mappings":"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"}